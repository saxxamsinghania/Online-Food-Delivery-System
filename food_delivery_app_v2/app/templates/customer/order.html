<!-- app/templates/order/details.html -->
{% extends "base.html" %}

{% block title %}Order #{{ order.OrderID }}{% endblock %}

{% block content %}
<div class="order-details">
    <div class="order-header">
        <h2>Order #{{ order.OrderID }}</h2>
        <div class="order-meta">
            <p>Status: <span class="status {{ order.Status.lower() }}">{{ order.Status }}</span></p>
            <p>Date: {{ order.OrderDate.strftime('%Y-%m-%d %H:%M') }}</p>
            <p>Restaurant: {{ order.restaurant_name }}</p>
        </div>
    </div>

    <div class="order-items">
        <h3>Items</h3>
        <div class="items-list">
            {% for item in items %}
            <div class="order-item">
                <div class="item-info">
                    <h4>{{ item.Name }}</h4>
                    <p>{{ item.Description }}</p>
                </div>
                <div class="item-meta">
                    <p>Quantity: {{ item.Quantity }}</p>
                    <p>Price: ${{ "%.2f"|format(item.Price) }}</p>
                    <p>Subtotal: ${{ "%.2f"|format(item.Price * item.Quantity) }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="order-summary">
        <h3>Order Summary</h3>
        <p>Subtotal: ${{ "%.2f"|format(order.TotalAmount) }}</p>
        <p>Delivery Fee: $5.00</p>
        <p class="total">Total: ${{ "%.2f"|format(order.TotalAmount + 5) }}</p>
    </div>

    {% if not order.Rating %}
    <div class="order-rating">
        <h3>Rate Your Order</h3>
        <div class="rating-stars">
            {% for i in range(1, 6) %}
            <span class="star" data-rating="{{ i }}" onclick="rateOrder({{ i }})">â˜†</span>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}